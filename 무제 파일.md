지금까지의 CTest.cpp 의 내용을 각자 모듈화 시킨다.

- Resource 관리

1. Engine Library/ Source/ 07.Resource 에서 <span style="color: yellow">CResource class 생성</span>
	1.  맴버 변수
		1. 리소스 타입 (m_Type)
		2. 참조 카운트 (m_iRefCount)
		3. 리소스 고유 이름 (m_strKey)
		4. 리소스 경로 (m_strRelativePath)
	2. UpdateResourceData() 를 순수가상함수로 설정
	3. Clone() 은 구현하지 않는다. (nullptr 을 반환한다.)
	4. ReleaseResource() 로 해당 리소스를 삭제.

2. Source/ 07.Resource 에 <span style="color: yellow">4. Shader 폴더 생성</span>
	1. CShader class 생성
		1. 맴버 변수 : ComPtr <ID3DBlob.> 형의 변수 m_ErrBlob
		2. 생성자에서 RESOURCE_TYPE 을 인자로 받아 부모 생성자의 생성자에 전달.

3. Source/ 07.Resource/ 4.Shader 에 <span style="color: yellow">GraphicsShader 폴더 생성 및 해당 폴더에 CGraphicsShader class</span> (CResource 를 상속 받는다.) 
	1. 맴버 변수
	 ![[Pasted image 20230326032855.png]]
	2. CreateVertexShadeer() 와 CreatePixelShader(), SetTopology()
		1. CreateShader 함수에서
			1. shader 파일 경로를 매개변수에서 받아 컴파일한다. D3DCompileFromFile()
			2. 컴파일된 객체로 VertexShader 혹은 PixelShader 를 만든다. CreateVertexShader()
			3. Input Layout 생성. POSITION과 COLOR 를 요소로 갖는D3D11_INPUT_ELEMENT_DESC 형 크기2의 배열
			4. 생성한 Input Layout  으로 CreateInputLayout() 호출
		2. UpdateResourceData() 를 override 하여 생성된 shader 변수들을 파이프 라인에 바인딩한다.
			1. IASetInputlayout()
			2. IASetPrimitiveTopology()
			3. VSSetShader()
			4. PSSetShader()

4. Source/ 07.Resource/ <span style="color: yellow">1. Mesh 폴더 생성 및 해당 폴더에 CMesh class 생성</span>
	1. 맴버 변수
	![[Pasted image 20230402223035.png]]
	~Sys 변수는 한 종류의 버퍼들을 요소로 하는 배열이다. (이 배열들은 각 버퍼에 필요한 subresource 구조체의 맴버 pSysMem에 저장된다. 이는 각 버퍼의 초기 값을 의미한다.)
	2. CreateMesh() 함수로 mesh 를 생성한다. (각 버퍼 초기 값 배열의 주소와, 그 크기를 매개변수로 받아 각 Buffer 를 생성한다.)
	3. UpdateResourceData()
		1. IASetVertexBuffer() 와 IASetIndexBuffer() 를 호출하여 새로운 버퍼를 IA Stage 에 바인딩한다.
	4. RenderMesh() 함수로 버퍼를 출력한다.
		1. UpdateResourceData() 호출
		2. DrawIndexed() 호출로 인덱스 버퍼에 따라 정점을 출력한다.

5. CMeshRender 클래스 수정
	1. 맴버 변수
		1. CMesh* 형, CGraphicsShader* 형 변수 선언 (각 m_pMesh, m_pShader)
		2. 맴버 변수에 대한 Set, Get 함수 추가
		3. BeginRenderingMesh() 함수
			1. m_pMesh 와 m_pShader 가 둘다 존재할 때,
			2. m_pMesh->UpdateResourceData() 호출
			3. m_pShader->RenderMesh() 호출 하여 랜더링 시작