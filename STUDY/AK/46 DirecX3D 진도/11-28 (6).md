상수 버퍼

GPU 메모리 (레지스터 영역)에 데이터를 저장해야 할 때 사용된다.

hlsl 에서 cbuffer 를 자료형으로 하며 레지스터 영역의 슬롯을 하나 지정한다.
해당 구조는 해당 슬롯에 저장할 버퍼의 구조체와 같다.

상수 버퍼 클래스인 Constant Buffer 는 ID3D11Buffer 형 객체와 해당 객체를 설정하는 D3D11_BUFFER_DESC 와 UINT 형 레지스터 슬롯 번호를 멤버로 가진다.

ID3D11Buffer 는 ID3D11Resource 를 상속받았으며,
ID3D11Resource 는 GPU 메모리 기능을 관리한다.
ID3D11Resource 를 상속 받은 ID3D11Buffer 는 GPU 의 메모리를 할당 받고 관리하는 객체이다.

상수 버퍼의 구성 성분을 미리 구조체로 정의한다.
hlsl 에서는 cbuffer 형으로 상수 버퍼를 선언한다. 선언한 상수버퍼에는 레지스터 넘버를 지정하고 이때 넘버의 앞에 b 를 붙인다.

Device 의 Initialize() 에서 상수 버퍼를 생성하는 CreateConstBuffer() 를 호출한다. 해당 함수에서 유형 별로 상수 버퍼를 생성한다.
Constant Buffer 객체를 생성할 때 슬롯 번호를 인자로 주고 해당 객체에 대해 DEVICE->CreateBuffer() 를 호출하여 상수 버퍼를 생성한다. 생성된 상수 버퍼는 Constant Buffer 클래스의 ID3D11Buffer 형 객체에 저장된다. 

상수 버퍼 바인딩

\상수 버퍼 유형이 되는  Component 의 UpdateData() 에서
각 유형 별 상수버퍼에 값 (transform 의 경우 Vertex Shader 에서 사용되는 여러 행렬 데이)을 설정하고 해당 상수 버퍼에 대해 CONTEXT->(VS, HS, DS, GS, PS)SetConstantBuffers() 를 호출하여 랜더링 파이프 라인에 바인딩한다.


재질이란 무엇인가?
선택한 쉐이더와 해당 쉐이더가 요구하는 파라미터까지 세팅을 잡아놓은 요소

material 이 복사본ㅇ을 주는 이유

ptr

같은 재질을 사용하는 객체들만 모아서 일괄적으로 렌더링한다. -> 속도가 빨라진다.

드로우 콜이란?
여러 개를 그리더라도 하나의 인스턴싱으로 진행되면 드로우 콜이 1이다.
 