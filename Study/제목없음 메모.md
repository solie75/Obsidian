Windows 운영체제에서 화면에 그림을 출력시키기 위해서 DC(Device Context)를 사용한다.

-> 화면에 출력된 그림은 DC의 Bitmap 객체에 보관되어 있기 때문에 해당 Bitmap 객체에 저장된 '비트 패턴'을 GetBitmapBits 함수로 복사하여 사용한다.

작업 과정

1. Window의 DC 얻기
 - HDC h_dc = GetDC(m_hWnd);  // m_hWnd는 윈도우의 핸들 값.

2. DC에서 비트맵 객체 얻기
 ( h_dc에 연결된 GDI 객체들 중에서 비트맵 객체의 핸들 값을 얻고 싶을 때 )
 - HBITMAP h_bitmap = (HBITMAP)GetCurrentObject(h_dc, OBJ_BITMAP);

3. 비트맴 객체에 저장된 '비트 패턴' 복사
 '비트 패턴'을 복사하기 위해서 ' 비트 패턴'을 저장할 메모리를 할당해야 한다. -> 메모리의 크기를 알기 위해 비트맵의 정보(폭, 높이, 색상 수 등)가 어떻게 되는지 알아야 한다. -> GetObject() 함수를 사용해서 비트맵 정보를 알아낸다.

 - BITMAP bmp_info; // 비트맵의 정보를 담을 구조체
 ( 비트맵 객체에서 비트맵 정보를 bmp_info에 복사해둔다.)
 - GetObject( h_bitmap, sizeof(Bitmap), &bmp_info );


 (비트 패턴의 크기 = 비트맵의 폭* 높이* 색상수/8 이다. -> 이때 색상의 경우 비트수로 되어 있기에 8을 나누어 바이트 단위로 만든다.)
 - int pattern_size = bmp_info.bmWidth* bmp_info.bmHeight* bmp_info.bmBitsPixel/8;
 (비트 패턴을 저장할 메모리를 할당)
 - char *p_data = new char[pattern_size];
 (비트맵 객체에서 '비트 패턴'을 복사)
 - GetBitmapBits(h_bitmap, pattern_size, p_data);
 - (p_data에 들어있는 '비트 패턴' 사용)
 ( 사용했던 메모리 해제 )
 - delete[] p_data;

4. 사용했던 DC 반환하기
 - ReleaseDC(m_hWnd, h_dc);